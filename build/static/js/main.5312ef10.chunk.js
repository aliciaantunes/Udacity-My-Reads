(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c.n(n),s=c(19),a=c.n(s),r=(c(30),c(5)),i=c(11),l="https://reactnd-books-api.udacity.com",j=localStorage.token;j||(j=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:j},b=c(12),d=c(2),u=c(3);var O=function(e){var t=e.book,c=e.onChangeShelf;return Object(u.jsx)("li",{children:Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(t.imageLinks&&t.imageLinks.thumbnail,'")')}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{onChange:function(e){var n=e.target.value;c(t,n)},value:t.shelf||"none",children:[Object(u.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:t.title}),Object(u.jsx)("div",{className:"book-authors",children:t.authors})]})})};function f(e){var t=e.books,c=e.title,n=e.changeBookShelf;return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:c}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.map((function(e){return Object(u.jsx)(O,{book:e,onChangeShelf:n},e.id)}))})})]})}f.defaultProps={books:[],title:""};var k=f;function x(e){var t=e.myBooks,c=e.changeBookShelf,n=function(e){return t.filter((function(t){return t.shelf===e}))};return Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})}),Object(u.jsxs)("div",{className:"list-books-content",children:[Object(u.jsx)(k,{books:n("currentlyReading"),title:"Currently Reading",changeBookShelf:c}),Object(u.jsx)(k,{books:n("wantToRead"),title:"Want to Read",changeBookShelf:c}),Object(u.jsx)(k,{books:n("read"),title:"Read",changeBookShelf:c}),Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)(b.b,{to:"/search",children:"Add a book"})})]})]})}x.defaultProps={myBooks:[]};var v=x,m=c(25);function p(e){var t=e.myBooks,c=e.changeBookShelf,o=Object(n.useState)([]),s=Object(r.a)(o,2),a=s[0],j=s[1],d=Object(n.useState)(""),f=Object(r.a)(d,2),k=f[0],x=f[1],v=Object(m.a)(400,(function(e){var t,c;e.length>0?(t=e,c=10,fetch("".concat(l,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:t,maxResults:c})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){e.length>0?j(e):j([])})):j([])}));Object(n.useEffect)((function(){return function(){j([])}}),[]);return Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(b.b,{className:"close-search",to:"/",children:"Close"}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title or author",value:k,onChange:function(e){var t=e.target.value;x(t),v(t)}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:a&&a.map((function(e){var n=Object(i.a)({},e);return t.forEach((function(e){n.id===e.id&&(n.shelf=e.shelf)})),Object(u.jsx)(O,{book:n,onChangeShelf:c},n.id)}))})})]})}p.defaultProps={myBooks:[]};var g=p,y=(c(33),function(){return Object(u.jsx)("div",{className:"overlay",children:Object(u.jsx)("div",{className:"lds-ripple",children:Object(u.jsx)("div",{})})})});c(34);var N=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),c=t[0],o=t[1],s=Object(n.useState)(!1),a=Object(r.a)(s,2),j=a[0],O=a[1];Object(n.useEffect)((function(){f()}),[]);var f=function(){O(!0),fetch("".concat(l,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){o(e),O(!1)}))},k=function(e,t){(function(e,t){return fetch("".concat(l,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})(e,t).then((function(){f()}))};return Object(u.jsx)(b.a,{children:Object(u.jsxs)("div",{className:"app",children:[j&&Object(u.jsx)(y,{}),Object(u.jsx)("div",{children:Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{exact:!0,path:"/",element:Object(u.jsx)(v,{myBooks:c,changeBookShelf:k})}),Object(u.jsx)(d.a,{path:"/search",element:Object(u.jsx)(g,{myBooks:c,changeBookShelf:k})})]})})]})})};a.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.5312ef10.chunk.js.map